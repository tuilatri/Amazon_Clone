classDiagram
    %% User Domain Classes
    class SiteUser {
        +int user_id
        +str user_name
        +str email_address
        +str phone_number
        +str password
        +int role
        +str status
        +int age
        +str gender
        +str city
        +datetime created_at
        +datetime updated_at
        +datetime last_login_at
        +register()
        +login()
        +updateProfile()
    }
    
    class Address {
        +int address_id
        +str unit_number
        +str street_number
        +str address_line1
        +str address_line2
        +str region
        +str postal_code
    }
    
    class UserAddress {
        +int user_id
        +int address_id
        +bool is_default
    }
    
    class UserPaymentMethod {
        +int payment_method_id
        +int user_id
        +int payment_type_id
        +str provider
        +str account_number
        +date expiry_date
        +bool is_default
    }
    
    class UserReview {
        +int user_review_id
        +int user_id
        +int ordered_product_id
        +decimal rating_value
        +str comment
    }

    %% Product Domain Classes
    class Product {
        +str product_id
        +str product_name
        +str main_category
        +str main_category_encoded
        +str sub_category
        +str sub_category_encoded
        +str product_image
        +str product_link
        +float average_rating
        +int no_of_ratings
        +decimal discount_price_usd
        +decimal actual_price_usd
        +int category_id
        +getDetails()
        +updateRating()
        +getItems()
    }
    
    class ProductCategory {
        +int category_id
        +int parent_category_id
        +str category_name
        +getSubcategories()
        +getProducts()
    }
    
    class ProductItem {
        +str product_item_id
        +str product_id
        +str SKU
        +decimal price
        +bool is_in_stock
        +str product_image
    }
    
    class ProductRating {
        +int rating_id
        +int user_id
        +str product_id
        +float rating
    }
    
    %% Variation Domain Classes
    class Variation {
        +int variation_id
        +int category_id
        +str name
        +str size
        +str color
    }
    
    class VariationOption {
        +int variation_option_id
        +int variation_id
        +str value
    }
    
    class ProductConfiguration {
        +str product_item_id
        +int variation_option_id
    }

    %% Promotion Domain Classes
    class Promotion {
        +int promotion_id
        +str name
        +str description
        +decimal discount_rate
        +date start_date
        +date end_date
    }
    
    class PromotionCategory {
        +int category_id
        +int promotion_id
    }

    %% Shopping Cart Domain Classes
    class ShoppingCart {
        +int shopping_cart_id
        +int user_id
        +addItem()
        +removeItem()
        +updateQuantity()
        +getTotal()
        +clear()
    }
    
    class ShoppingCartItem {
        +int shopping_cart_id
        +str product_id
        +int quantity
        +decimal price
    }

    %% Order Domain Classes
    class ShopOrder {
        +int order_id
        +int user_id
        +date order_date
        +decimal order_total
        +int payment_method_id
        +int shipping_method_id
        +int order_status_id
        +datetime created_at
        +datetime completed_at
        +createOrder()
        +updateStatus()
        +cancel()
        +getOrderDetails()
    }
    
    class OrderLine {
        +int ordered_product_id
        +int order_id
        +str product_id
        +int qty
        +decimal price
    }
    
    class OrderStatus {
        +int order_status_id
        +str status
    }

    %% Payment and Shipping Domain Classes
    class PaymentType {
        +int payment_type_id
        +str payment_name
    }
    
    class ShippingMethod {
        +int shipping_method_id
        +str type
        +decimal price
    }

    %% Interest Domain Class
    class InterestingCategory {
        +int interesting_category_id
        +int category_id
        +int user_id
    }

    %% ML Recommendation Classes
    class SearchRecommendation {
        +DataFrame product
        +TfidfVectorizer vectorizer
        +tfidf_matrix
        +search(query, top_n)
    }
    
    class RecommendTrendModel {
        +DataFrame user_data
        +DataFrame ratings_data
        +DataFrame product_data
        +calculate_similarity()
        +find_top_similar_users(user_info)
        +collaborative_filtering_recommendations(user_info, top_n)
        +most_trending_products(top_n)
        +recommend(user_info, top_n)
    }
    
    class InterestRecommendationModel {
        +DataFrame user_data
        +DataFrame ratings_data
        +DataFrame product_data
        +calculate_similarity()
        +find_top_similar_users(user_info)
        +collaborative_filtering_recommendations(user_info, top_n)
        +highest_rated_products_by_interest(user_info, top_n)
        +recommend(user_info, top_n)
    }
    
    class AssociationRecommendationModel {
        +DataFrame product
        +DataFrame rules
        +get_top_associated_categories(item_ids, n)
        +get_top_rated_items(categories, top_n)
        +recommend(item_ids, associated_n, top_n)
    }

    %% User Domain Relationships
    SiteUser "1" --o "*" UserAddress : has
    Address "1" --o "*" UserAddress : used_by
    SiteUser "1" --o "*" UserPaymentMethod : owns
    SiteUser "1" --o "*" UserReview : writes
    SiteUser "1" --o "*" ProductRating : rates
    SiteUser "1" --o "*" ShoppingCart : has
    SiteUser "1" --o "*" ShopOrder : places
    SiteUser "1" --o "*" InterestingCategory : interested_in
    
    %% Product Domain Relationships
    ProductCategory "1" --o "*" Product : contains
    ProductCategory "1" --o "*" ProductCategory : parent_of
    Product "1" *-- "*" ProductItem : has
    Product "1" --o "*" ProductRating : receives
    Product "1" --o "*" ShoppingCartItem : in
    
    %% Variation Domain Relationships
    ProductCategory "1" --o "*" Variation : defines
    Variation "1" *-- "*" VariationOption : has
    ProductItem "1" --o "*" ProductConfiguration : configured_by
    VariationOption "1" --o "*" ProductConfiguration : applied_to
    
    %% Promotion Domain Relationships
    Promotion "1" --o "*" PromotionCategory : applies_to
    ProductCategory "1" --o "*" PromotionCategory : has
    ProductCategory "1" --o "*" InterestingCategory : tracked_by
    
    %% Shopping Cart Domain Relationships
    ShoppingCart "1" *-- "*" ShoppingCartItem : contains
    
    %% Order Domain Relationships
    ShopOrder "1" *-- "*" OrderLine : contains
    OrderLine "1" --o "*" UserReview : reviewed_by
    OrderLine "*" --o "1" Product : for
    OrderStatus "1" --o "*" ShopOrder : status_of
    
    %% Payment and Shipping Domain Relationships
    PaymentType "1" --o "*" UserPaymentMethod : type_of
    PaymentType "1" --o "*" ShopOrder : paid_via
    ShippingMethod "1" --o "*" ShopOrder : shipped_via
    
    %% ML Models Dependencies (use product/user data)
    SearchRecommendation ..> Product : searches
    RecommendTrendModel ..> Product : recommends
    RecommendTrendModel ..> SiteUser : analyzes
    RecommendTrendModel ..> ProductRating : uses
    InterestRecommendationModel ..> Product : recommends
    InterestRecommendationModel ..> InterestingCategory : uses
    InterestRecommendationModel ..> SiteUser : analyzes
    AssociationRecommendationModel ..> Product : recommends
